mutation CreateUser @auth(level: USER) {
  user_insert(data: {
    email: "example@example.com"
    createdAt_expr: "request.time"
  })
}

query ListUsers @auth(level: USER, insecureReason: "This operation is safe to expose to all logged in users.") {
  users {
    id
    email
    firstName
    lastName
  }
}

mutation SubscribeNewsletter($email: String!, $source: String!) @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  newsletterSubscription_insert(data: {
    email: $email
    source: $source
    subscribedAt_expr: "request.time"
  })
}

query GetNewsletterSubscriptions @auth(level: USER) {
  newsletterSubscriptions {
    id
    email
    source
    subscribedAt
  }
}